<!-- Navigateur -->

<html>
    <base href="/" />
    <head>
        <link rel='stylesheet' type='text/CSS' href='/styleIndex.css'>
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.7.2/angular.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.7.2/angular-route.js"></script>
        <script src="/services/authService.js"></script>
        <script src="/services/localStorageService.js"></script>
        <script src="/services/sessionService.js"></script>
        <script src="/services/userService.js"></script>
        <script src="/controllers/loginController.js"></script>
        <script src="/controllers/userController.js"></script>
        <script src="/controllers/quizzController.js"></script>
        <script src="/app.js"></script>
    </head>
    <body ng-app="app">
        <div ng-controller="loginController" class="skipLineWithBSn">
            <div id="bandeau" class="disappear bandeau">
                {{bandeau()}}
            </div>
            <button ng-click="logOut()" class="toRight">Déconnexion</button>
        </div>

        <div ng-controller="userController" class="toLeft profil bLBlue">
            <table class="alignTxt">
                <tr>
                    <td><img class="linkInteract" ng-blur="modAvatar = false" ng-click="modAvatar = true" ng-src="{{user.avatar}}"></img>
                        <div ng-show="modAvatar == true">
                            <input class="inputModifImg" ng-blur="modifProfil(user.id, newAvatar, null, null, null); modAvatar = false" ng-enter="modifProfil(user.id, newAvatar, null, null, null)" ng-model="newAvatar" placeholder="Lien vers nouvelle image..." type="text">
                        </div>
                    </td>
                </tr>
                <tr>
                    <td class="linkInteract" ng-click="modNickname = true">
                        <div ng-show="modNickname != true">
                            {{user.identifiant}}
                        </div>
                        <div ng-show="modNickname == true">
                            <input class="alignTxt bLBlue noBorder" ng-blur="modifProfil(user.id, null, newIdentifiant, null, null); modNickname = false" ng-enter="modifProfil(user.id, null, newIdentifiant, null, null)" ng-model="newIdentifiant" placeholder="{{user.identifiant}}" size="{{newIdentifiant.length}}"  type="text">
                        </div>     
                    </td>
                </tr>
                <tr>
                    <td class="linkInteract" ng-click="modFirstname = true">
                        <div ng-show="modFirstname != true">
                            {{user.prenom}}
                        </div>
                        <div ng-show="modFirstname == true">
                            <input class="alignTxt bLBlue noBorder" ng-blur="modifProfil(user.id, null, null, newPrenom, null); modFirstname = false" ng-enter="modifProfil(user.id, null, null, newPrenom, null)" ng-model="newPrenom" placeholder="{{user.prenom}}" size="{{newPrenom.length}}" type="text">
                        </div>
                    </td>
                </tr>
                <tr>
                    <td class="linkInteract" ng-click="modLastname = true">
                        <div ng-show="modLastname != true">
                            {{user.nom}}
                        </div>
                        <div ng-show="modLastname == true">
                            <input class="alignTxt bLBlue noBorder" ng-blur="modifProfil(user.id, null, null, newNom, null); modLastname = false" ng-enter="modifProfil(user.id, null, null, newNom, null)" ng-model="newNom" placeholder="{{user.nom}}" size="{{newNom.length}}" type="text">
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>{{user.statut}}</td>
                </tr>
            </table>
        </div>

        <div ng-controller="userController">
            <div class="bLGreen toRight userList xAlign">
                <p>Utilisateurs connectés</p>
                <div ng-repeat="user in userList">
                        <a class="underlined linkInteract" ng-click="getUserProfile(user.id); toggleProfilDisplay()">{{user.identifiant}}</a>
                </div>
            </div>
            <div ng-show="showProfil" class=" bLGreen profil toRight xAlign">
                <table class="alignTxt">
                    <tr>
                        <td><img ng-src="{{user.avatar}}"></img></td>
                    </tr>
                    <tr>
                        <td>{{user.identifiant}}</td>
                    </tr>
                    <tr>
                        <td>{{user.prenom}}</td>
                    </tr>
                    <tr>
                        <td>{{user.nom}}</td>
                    </tr>
                    <tr>
                        <td>{{user.statut}}</td>
                    </tr>
                    <tr>
                        <td>
                            <button>Lancer un défi</button>
                        </td>
                    </tr>
                </table>
            </div>
        </div>

        <div ng-controller="quizzController">
            {{}}
        </div>
    </body>
</html>